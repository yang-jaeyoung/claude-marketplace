# Stimulus Conventions

## Overview

Stimulus follows strict naming conventions that connect JavaScript controllers to HTML elements automatically. Understanding these conventions is key to effective Stimulus development.

## Controller Naming

| JavaScript File | Controller Name | HTML Reference |
|-----------------|-----------------|----------------|
| `hello_controller.js` | HelloController | `data-controller="hello"` |
| `user_form_controller.js` | UserFormController | `data-controller="user-form"` |
| `clipboard_controller.js` | ClipboardController | `data-controller="clipboard"` |

### Naming Rules

```javascript
// File: app/javascript/controllers/search_form_controller.js
// Controller name in HTML: search-form
// Class name: SearchFormController

import { Controller } from "@hotwired/stimulus"

export default class extends Controller {
  // Implementation
}
```

## File Structure

```
app/javascript/
├── controllers/
│   ├── index.js           # Auto-generated by stimulus:manifest
│   ├── application.js     # Main Stimulus application
│   ├── hello_controller.js
│   ├── dropdown_controller.js
│   └── nested/
│       └── modal_controller.js  # data-controller="nested--modal"
```

## Registration

```javascript
// app/javascript/controllers/application.js
import { Application } from "@hotwired/stimulus"

const application = Application.start()

// Configure Stimulus development experience
application.debug = false
window.Stimulus = application

export { application }
```

```javascript
// app/javascript/controllers/index.js (auto-generated)
import { application } from "./application"

import HelloController from "./hello_controller"
application.register("hello", HelloController)

import DropdownController from "./dropdown_controller"
application.register("dropdown", DropdownController)
```

## HTML Conventions

### Controller Connection

```erb
<!-- Single controller -->
<div data-controller="dropdown">
  <!-- Controller scope -->
</div>

<!-- Multiple controllers -->
<div data-controller="dropdown tooltip clipboard">
  <!-- All three controllers connected -->
</div>
```

### Targets

```javascript
// Controller
export default class extends Controller {
  static targets = ["input", "output", "submitButton"]
}
```

```erb
<!-- HTML -->
<div data-controller="form">
  <input data-form-target="input">
  <span data-form-target="output"></span>
  <button data-form-target="submitButton">Submit</button>
</div>
```

Target naming convention: `data-[controller]-target="[name]"`

### Values

```javascript
// Controller
export default class extends Controller {
  static values = {
    url: String,
    refreshInterval: { type: Number, default: 5000 },
    autoStart: { type: Boolean, default: true }
  }
}
```

```erb
<!-- HTML -->
<div data-controller="loader"
     data-loader-url-value="/api/data"
     data-loader-refresh-interval-value="3000"
     data-loader-auto-start-value="false">
</div>
```

Value naming convention: `data-[controller]-[name]-value="[value]"`

### Classes

```javascript
// Controller
export default class extends Controller {
  static classes = ["active", "loading", "hidden"]
}
```

```erb
<!-- HTML -->
<div data-controller="toggle"
     data-toggle-active-class="bg-blue-500"
     data-toggle-loading-class="opacity-50"
     data-toggle-hidden-class="hidden">
</div>
```

Class naming convention: `data-[controller]-[name]-class="[css-class]"`

### Actions

```erb
<!-- Basic action -->
<button data-action="dropdown#toggle">Toggle</button>

<!-- With event -->
<input data-action="input->search#perform">

<!-- Multiple actions -->
<input data-action="input->search#perform focus->search#expand blur->search#collapse">

<!-- Global events -->
<div data-action="click@window->modal#close">
<div data-action="keydown.escape@window->modal#close">
```

Action naming convention: `[event]->[controller]#[method]`

## Event Shorthand

| Element | Default Event |
|---------|---------------|
| `<button>` | click |
| `<input type="submit">` | click |
| `<input>` | input |
| `<textarea>` | input |
| `<select>` | change |
| `<form>` | submit |
| `<a>` | click |
| `<details>` | toggle |

```erb
<!-- These are equivalent -->
<button data-action="click->dropdown#toggle">
<button data-action="dropdown#toggle">
```

## Nested Controllers

```
controllers/
├── admin/
│   └── user_controller.js
└── components/
    └── modal_controller.js
```

```erb
<!-- Nested namespace -->
<div data-controller="admin--user">
<div data-controller="components--modal">
```

## Outlets

```javascript
// Controller
export default class extends Controller {
  static outlets = ["modal", "notification"]

  showModal() {
    this.modalOutlet.open()
  }

  showAllModals() {
    this.modalOutlets.forEach(modal => modal.open())
  }
}
```

```erb
<div data-controller="dashboard"
     data-dashboard-modal-outlet=".modal"
     data-dashboard-notification-outlet="#notifications">

  <div class="modal" data-controller="modal">...</div>
  <div id="notifications" data-controller="notification">...</div>
</div>
```

## Naming Best Practices

| Pattern | Good | Bad |
|---------|------|-----|
| Controller names | `dropdown`, `user-form` | `DropDown`, `userForm` |
| Target names | `submitButton` | `submit-button`, `SubmitButton` |
| Value names | `refreshInterval` | `refresh-interval`, `RefreshInterval` |
| Action methods | `toggle`, `handleClick` | `Toggle`, `handle_click` |

## Generator

```bash
# Generate new controller
bin/rails generate stimulus dropdown

# Creates: app/javascript/controllers/dropdown_controller.js
# Updates: app/javascript/controllers/index.js
```

## Related

- [lifecycle.md](./lifecycle.md): Lifecycle callbacks
- [targets.md](./targets.md): Target system
- [values.md](./values.md): Value system
- [actions.md](./actions.md): Action system
