{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "react-project-analyzer/output",
  "title": "React Project Analyzer Output Schema",
  "description": "React 프로젝트 분석 결과 데이터 스키마",
  "type": "object",
  "required": ["meta", "project", "components", "stores", "routes"],
  "properties": {
    "meta": {
      "type": "object",
      "description": "분석 메타데이터",
      "required": ["generated_at", "skill_version", "project_path"],
      "properties": {
        "generated_at": {
          "type": "string",
          "format": "date-time",
          "description": "분석 생성 시간 (ISO 8601)"
        },
        "skill_version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "description": "스킬 버전"
        },
        "project_path": {
          "type": "string",
          "description": "분석된 프로젝트 경로"
        },
        "analysis_options": {
          "type": "object",
          "description": "분석 옵션",
          "properties": {
            "analysis_depth": {
              "type": "string",
              "enum": ["shallow", "deep"],
              "default": "shallow"
            },
            "component_paths": {
              "type": "array",
              "items": { "type": "string" }
            },
            "include_node_modules": {
              "type": "boolean",
              "default": false
            }
          }
        }
      }
    },
    "project": {
      "type": "object",
      "description": "프로젝트 메타 정보",
      "required": ["name", "reactVersion", "reactGeneration"],
      "properties": {
        "name": {
          "type": "string",
          "description": "프로젝트 이름"
        },
        "reactVersion": {
          "type": "string",
          "description": "React 버전 (예: 19.1.0)"
        },
        "reactGeneration": {
          "type": "string",
          "enum": ["17.x", "18.x", "19.x"],
          "description": "React 세대"
        },
        "buildTool": {
          "type": "string",
          "enum": ["vite", "cra", "next", "remix", "webpack", "other"],
          "description": "빌드 도구"
        },
        "typescript": {
          "type": "boolean",
          "description": "TypeScript 사용 여부"
        },
        "stateManagement": {
          "type": "array",
          "description": "상태관리 라이브러리 목록",
          "items": {
            "type": "string",
            "enum": ["redux-toolkit", "zustand", "jotai", "recoil", "context-api", "none"]
          }
        },
        "router": {
          "type": "string",
          "description": "라우터 버전 (예: react-router@7.x)"
        },
        "styling": {
          "type": "string",
          "enum": ["styled-components", "emotion", "css-modules", "tailwind", "sass", "css", "other"],
          "description": "스타일링 솔루션"
        },
        "uiFramework": {
          "type": ["string", "null"],
          "description": "UI 프레임워크 (예: material-ui, ant-design, chakra-ui)"
        }
      }
    },
    "structure": {
      "type": "object",
      "description": "디렉토리 구조 정보",
      "properties": {
        "sourceDir": {
          "type": "string",
          "description": "소스 디렉토리 경로 (예: src)"
        },
        "directories": {
          "type": "array",
          "description": "주요 디렉토리 목록",
          "items": {
            "type": "object",
            "required": ["path", "type"],
            "properties": {
              "path": {
                "type": "string",
                "description": "디렉토리 경로"
              },
              "type": {
                "type": "string",
                "enum": ["components", "pages", "views", "layouts", "features", "store", "stores", "hooks", "contexts", "router", "utils", "assets", "styles", "types", "other"],
                "description": "디렉토리 유형"
              },
              "fileCount": {
                "type": "integer",
                "description": "파일 수"
              }
            }
          }
        }
      }
    },
    "components": {
      "type": "array",
      "description": "컴포넌트 목록",
      "items": {
        "type": "object",
        "required": ["name", "path", "category"],
        "properties": {
          "name": {
            "type": "string",
            "description": "컴포넌트 이름"
          },
          "path": {
            "type": "string",
            "description": "컴포넌트 파일 경로"
          },
          "category": {
            "type": "string",
            "enum": ["Page", "Layout", "Container", "Feature", "Common", "Base", "Unclassified"],
            "description": "컴포넌트 분류"
          },
          "componentType": {
            "type": "string",
            "enum": ["function", "arrow", "class", "forwardRef", "memo"],
            "description": "컴포넌트 정의 방식"
          },
          "lang": {
            "type": "string",
            "enum": ["tsx", "jsx", "ts", "js"],
            "description": "파일 언어"
          },
          "props": {
            "type": "array",
            "description": "Props 목록",
            "items": {
              "type": "object",
              "required": ["name"],
              "properties": {
                "name": {
                  "type": "string",
                  "description": "Prop 이름"
                },
                "type": {
                  "type": "string",
                  "description": "Prop 타입"
                },
                "required": {
                  "type": "boolean",
                  "description": "필수 여부"
                },
                "default": {
                  "type": "string",
                  "description": "기본값"
                }
              }
            }
          },
          "hooks": {
            "type": "array",
            "description": "사용된 Hooks 목록",
            "items": {
              "type": "object",
              "required": ["name"],
              "properties": {
                "name": {
                  "type": "string",
                  "description": "Hook 이름"
                },
                "isCustom": {
                  "type": "boolean",
                  "description": "커스텀 Hook 여부"
                },
                "source": {
                  "type": "string",
                  "description": "Hook 소스 (react, 커스텀 경로 등)"
                }
              }
            }
          },
          "dependencies": {
            "type": "array",
            "description": "의존하는 컴포넌트/모듈",
            "items": {
              "type": "object",
              "required": ["name", "type"],
              "properties": {
                "name": {
                  "type": "string",
                  "description": "의존 대상 이름"
                },
                "path": {
                  "type": "string",
                  "description": "의존 대상 경로"
                },
                "type": {
                  "type": "string",
                  "enum": ["component", "hook", "store", "context", "utility", "external"],
                  "description": "의존 유형"
                },
                "dynamic": {
                  "type": "boolean",
                  "description": "동적 import 여부 (React.lazy)"
                }
              }
            }
          },
          "usedStores": {
            "type": "array",
            "description": "사용된 Store 목록",
            "items": { "type": "string" }
          },
          "usedContexts": {
            "type": "array",
            "description": "사용된 Context 목록",
            "items": { "type": "string" }
          },
          "hasRef": {
            "type": "boolean",
            "description": "forwardRef 사용 여부"
          },
          "isMemo": {
            "type": "boolean",
            "description": "React.memo 사용 여부"
          }
        }
      }
    },
    "stores": {
      "type": "object",
      "description": "상태관리 분석 결과",
      "required": ["types"],
      "properties": {
        "types": {
          "type": "array",
          "description": "사용된 상태관리 유형들",
          "items": {
            "type": "string",
            "enum": ["redux-toolkit", "zustand", "jotai", "recoil", "context-api", "none"]
          }
        },
        "redux": {
          "type": "object",
          "description": "Redux Toolkit 정보",
          "properties": {
            "slices": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["name", "path"],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Slice 이름"
                  },
                  "path": {
                    "type": "string",
                    "description": "파일 경로"
                  },
                  "state": {
                    "type": "array",
                    "description": "State 필드 목록",
                    "items": {
                      "type": "object",
                      "properties": {
                        "name": { "type": "string" },
                        "type": { "type": "string" }
                      }
                    }
                  },
                  "reducers": {
                    "type": "array",
                    "description": "Reducer 액션 목록",
                    "items": { "type": "string" }
                  },
                  "selectors": {
                    "type": "array",
                    "description": "Selector 함수 목록",
                    "items": { "type": "string" }
                  },
                  "thunks": {
                    "type": "array",
                    "description": "Async Thunk 목록",
                    "items": { "type": "string" }
                  },
                  "dependencies": {
                    "type": "array",
                    "description": "의존하는 다른 slice",
                    "items": { "type": "string" }
                  }
                }
              }
            },
            "rtkQuery": {
              "type": "array",
              "description": "RTK Query API 목록",
              "items": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "path": { "type": "string" },
                  "endpoints": {
                    "type": "array",
                    "items": { "type": "string" }
                  }
                }
              }
            }
          }
        },
        "zustand": {
          "type": "object",
          "description": "Zustand 정보",
          "properties": {
            "stores": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["name", "path"],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Store 함수명 (예: useUserStore)"
                  },
                  "path": {
                    "type": "string",
                    "description": "파일 경로"
                  },
                  "state": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "name": { "type": "string" },
                        "type": { "type": "string" }
                      }
                    }
                  },
                  "actions": {
                    "type": "array",
                    "items": { "type": "string" }
                  },
                  "middleware": {
                    "type": "array",
                    "description": "사용된 미들웨어 (devtools, persist 등)",
                    "items": { "type": "string" }
                  },
                  "dependencies": {
                    "type": "array",
                    "description": "의존하는 다른 store",
                    "items": { "type": "string" }
                  }
                }
              }
            }
          }
        },
        "contexts": {
          "type": "array",
          "description": "Context API 정보",
          "items": {
            "type": "object",
            "required": ["name", "path"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Context 이름"
              },
              "path": {
                "type": "string",
                "description": "파일 경로"
              },
              "providerName": {
                "type": "string",
                "description": "Provider 컴포넌트 이름"
              },
              "hookName": {
                "type": "string",
                "description": "커스텀 Hook 이름 (예: useAuth)"
              },
              "values": {
                "type": "array",
                "description": "Context에서 제공하는 값들",
                "items": { "type": "string" }
              }
            }
          }
        }
      }
    },
    "routes": {
      "type": "object",
      "description": "라우팅 분석 결과",
      "properties": {
        "hasRouter": {
          "type": "boolean",
          "description": "라우터 사용 여부"
        },
        "routerType": {
          "type": "string",
          "enum": ["react-router-v6", "react-router-v7", "tanstack-router", "next-router", "remix-router", "other"],
          "description": "라우터 유형"
        },
        "routerVersion": {
          "type": "string",
          "description": "라우터 버전"
        },
        "routes": {
          "type": "array",
          "description": "라우트 목록",
          "items": {
            "$ref": "#/definitions/route"
          }
        },
        "loaders": {
          "type": "array",
          "description": "Data loader 함수 목록",
          "items": {
            "type": "object",
            "properties": {
              "name": { "type": "string" },
              "route": { "type": "string" },
              "path": { "type": "string" }
            }
          }
        },
        "actions": {
          "type": "array",
          "description": "Form action 함수 목록",
          "items": {
            "type": "object",
            "properties": {
              "name": { "type": "string" },
              "route": { "type": "string" },
              "path": { "type": "string" }
            }
          }
        }
      }
    },
    "hooks": {
      "type": "array",
      "description": "커스텀 Hooks 목록",
      "items": {
        "type": "object",
        "required": ["name", "path"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Hook 이름 (예: useAuth)"
          },
          "path": {
            "type": "string",
            "description": "파일 경로"
          },
          "parameters": {
            "type": "array",
            "description": "파라미터 목록",
            "items": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "type": { "type": "string" }
              }
            }
          },
          "returns": {
            "type": "string",
            "description": "반환 타입"
          },
          "dependencies": {
            "type": "array",
            "description": "의존하는 다른 Hook/Store",
            "items": { "type": "string" }
          },
          "usedBy": {
            "type": "array",
            "description": "이 Hook을 사용하는 컴포넌트들",
            "items": { "type": "string" }
          }
        }
      }
    },
    "dependencies": {
      "type": "object",
      "description": "의존성 분석 결과",
      "properties": {
        "graph": {
          "type": "object",
          "description": "컴포넌트 의존성 그래프 (인접 리스트)",
          "additionalProperties": {
            "type": "array",
            "items": { "type": "string" }
          }
        },
        "circular": {
          "type": "array",
          "description": "순환 의존성 목록",
          "items": {
            "type": "array",
            "items": { "type": "string" }
          }
        },
        "packages": {
          "type": "object",
          "description": "npm 패키지 정보",
          "properties": {
            "dependencies": {
              "type": "object",
              "description": "dependencies",
              "additionalProperties": { "type": "string" }
            },
            "devDependencies": {
              "type": "object",
              "description": "devDependencies",
              "additionalProperties": { "type": "string" }
            },
            "categorized": {
              "type": "object",
              "description": "카테고리별 패키지 분류",
              "properties": {
                "core": {
                  "type": "array",
                  "items": { "type": "string" }
                },
                "stateManagement": {
                  "type": "array",
                  "items": { "type": "string" }
                },
                "routing": {
                  "type": "array",
                  "items": { "type": "string" }
                },
                "styling": {
                  "type": "array",
                  "items": { "type": "string" }
                },
                "ui": {
                  "type": "array",
                  "items": { "type": "string" }
                },
                "http": {
                  "type": "array",
                  "items": { "type": "string" }
                },
                "utility": {
                  "type": "array",
                  "items": { "type": "string" }
                },
                "testing": {
                  "type": "array",
                  "items": { "type": "string" }
                },
                "build": {
                  "type": "array",
                  "items": { "type": "string" }
                }
              }
            }
          }
        }
      }
    },
    "metrics": {
      "type": "object",
      "description": "종합 메트릭스",
      "properties": {
        "total_components": {
          "type": "integer",
          "description": "총 컴포넌트 수"
        },
        "total_stores": {
          "type": "integer",
          "description": "총 Store/Slice 수"
        },
        "total_routes": {
          "type": "integer",
          "description": "총 라우트 수"
        },
        "total_hooks": {
          "type": "integer",
          "description": "총 커스텀 Hook 수"
        },
        "total_contexts": {
          "type": "integer",
          "description": "총 Context 수"
        },
        "circular_dependencies": {
          "type": "integer",
          "description": "순환 의존성 수"
        },
        "component_distribution": {
          "type": "object",
          "description": "카테고리별 컴포넌트 분포",
          "additionalProperties": { "type": "integer" }
        },
        "hook_usage": {
          "type": "object",
          "description": "Hook 사용 통계",
          "additionalProperties": { "type": "integer" }
        }
      }
    }
  },
  "definitions": {
    "route": {
      "type": "object",
      "required": ["path"],
      "properties": {
        "path": {
          "type": "string",
          "description": "라우트 경로"
        },
        "name": {
          "type": "string",
          "description": "라우트 이름"
        },
        "component": {
          "type": "string",
          "description": "연결된 컴포넌트 경로"
        },
        "lazy": {
          "type": "boolean",
          "description": "Lazy loading 여부"
        },
        "index": {
          "type": "boolean",
          "description": "Index 라우트 여부"
        },
        "hasLoader": {
          "type": "boolean",
          "description": "loader 함수 여부"
        },
        "hasAction": {
          "type": "boolean",
          "description": "action 함수 여부"
        },
        "hasErrorElement": {
          "type": "boolean",
          "description": "errorElement 여부"
        },
        "meta": {
          "type": "object",
          "description": "메타 정보",
          "additionalProperties": true
        },
        "children": {
          "type": "array",
          "description": "중첩 라우트",
          "items": { "$ref": "#/definitions/route" }
        },
        "dynamicSegments": {
          "type": "array",
          "description": "동적 세그먼트 목록 (:id 등)",
          "items": { "type": "string" }
        }
      }
    }
  }
}
