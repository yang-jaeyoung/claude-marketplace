{
  "hooks": {
    "SessionStart": [
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "command": "echo '{\"hookSpecificOutput\":{\"hookEventName\":\"SessionStart\",\"additionalContext\":\"CAW (Context-Aware Workflow) plugin is active. Use /cw:status to check workflow state or /cw:start to begin a new task.\"}}'"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "## Tidy First Commit Validation (Kent Beck)\n\n**IMPORTANT**: Check if the Bash command contains 'git commit'.\n- If NO 'git commit' in command: APPROVE IMMEDIATELY. Do not output anything. Just allow it.\n- If YES 'git commit' in command: Proceed with validation below.\n\n---\n\n**Validation steps (only for git commit commands)**:\n\n1. **Analyze staged changes**: The diff has already been reviewed or run `git diff --staged`\n\n2. **Classify change types**:\n   - Structural (Tidy): Renames, extracts, moves, formatting, dead code removal, documentation-only, schema additions without logic\n   - Behavioral (Build): New functions, logic changes, bug fixes, new tests, new commands\n\n3. **Decision matrix**:\n   | Detection | Action |\n   |-----------|--------|\n   | All structural | ✅ Allow with [tidy] prefix |\n   | All behavioral | ✅ Allow with [feat]/[fix]/[test] prefix |\n   | Mixed changes | ❌ Block and suggest splitting |\n\n4. **If mixed changes detected**:\n   - List structural changes found\n   - List behavioral changes found\n   - Suggest: Use `/cw:tidy --split` or manually separate commits\n   - Block the commit until resolved\n\n**Note**: New feature files (commands/*.md, agents/*.md) with their supporting schemas and docs in a SINGLE cohesive feature are considered behavioral, not mixed."
          }
        ]
      }
    ]
  }
}
