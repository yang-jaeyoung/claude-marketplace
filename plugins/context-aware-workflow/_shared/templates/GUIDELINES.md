# CAW Workflow Guidelines

> Auto-generated by `/cw:init --with-guidelines` on {{TIMESTAMP}}
> Project: {{PROJECT_NAME}} ({{PROJECT_TYPE}})

## Workflow Rules

### 1. Initialization

- Always ensure `.caw/` environment exists before starting work
- Use `/cw:init` to initialize, `/cw:init --reset` to reinitialize
- Check `/cw:status` for current workflow state

### 2. Tidy First Principle

Follow Kent Beck's Tidy First methodology:

| Type | Emoji | Description | Commit Separately |
|------|-------|-------------|-------------------|
| **Tidy** | ðŸ§¹ | Structural changes (no behavior change) | Yes |
| **Build** | ðŸ”¨ | Behavioral changes (new features, fixes) | Yes |

**Never mix Tidy and Build changes in the same commit.**

### 3. Planning Before Execution

1. `/cw:start "task description"` - Create structured plan
2. Review `task_plan.md` before proceeding
3. `/cw:next` - Execute steps one by one
4. `/cw:review` - Review completed work

### 4. Parallel Execution

- **Phase Deps**: Phases with same dependency can run in parallel
- **Step Deps**: Steps with no blocking deps can run in parallel
- Use `/cw:next --worktree phase N` for parallel execution

## Agent Usage

### Core Agents

| Agent | Model | When to Use |
|-------|-------|-------------|
| `cw:Planner` | Sonnet | Task planning, requirement analysis |
| `cw:Builder` | Opus | Code implementation |
| `cw:Reviewer` | Sonnet | Code review, quality checks |
| `cw:Fixer` | Opus | Bug fixes, refactoring |
| `cw:architect` | Sonnet | Architecture design |

### Model Routing

Automatic model selection based on task complexity:

| Complexity | Score | Model |
|------------|-------|-------|
| Simple | â‰¤ 0.3 | Haiku |
| Standard | 0.3 - 0.7 | Sonnet |
| Complex | > 0.7 | Opus |

**Override keywords:**
- `quick`, `simple` â†’ Force Haiku
- `standard` â†’ Force Sonnet
- `deep`, `complex` â†’ Force Opus

## Project-Specific Context

### Detected Environment

{{#FRAMEWORKS}}
- **{{FRAMEWORK_NAME}}** ({{FRAMEWORK_CATEGORY}}): {{FRAMEWORK_VERSION}}
{{/FRAMEWORKS}}

### Key Files

{{#KEY_FILES}}
- `{{FILE_PATH}}`: {{FILE_REASON}}
{{/KEY_FILES}}

### Conventions

{{#CONVENTIONS}}
- {{CONVENTION}}
{{/CONVENTIONS}}

## Workflow Commands

### Essential Commands

```bash
/cw:init              # Initialize environment
/cw:start "task"      # Start planning
/cw:next              # Execute next step
/cw:status            # Check progress
/cw:review            # Review work
```

### Advanced Commands

```bash
/cw:loop              # Autonomous execution loop
/cw:auto              # Full workflow automation
/cw:reflect           # Post-completion learning
/cw:tidy              # Apply structural improvements
```

## Quality Gates

Before marking a step complete:

1. **Code compiles** without errors
2. **Tests pass** (if applicable)
3. **No linting errors** (if linter configured)
4. **Follows project conventions**

## Serena Integration

If Serena MCP is available:

- `project_onboarding`: Project structure cache
- `domain_knowledge`: Business rules
- `lessons_learned`: Error resolutions
- `workflow_patterns`: Successful approaches

Use `/cw:sync` to sync with Serena memory.

---

*This file was auto-generated. Customize as needed for your project.*
