# 요구사항 명세서 역설계 가이드

## 목적

코드베이스에서 시스템이 충족하는 기능적/비기능적 요구사항을 추출합니다.

## 분석 대상

```
┌─────────────────────────────────────────────────────────────┐
│                    요구사항 추출 소스                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  기능적 요구사항                비기능적 요구사항              │
│  ┌───────────────┐            ┌───────────────┐            │
│  │ Controllers   │            │ 설정 파일      │            │
│  │ Services      │            │ 미들웨어       │            │
│  │ Use Cases     │            │ 로깅 설정      │            │
│  │ API 스펙      │            │ 캐싱 설정      │            │
│  │ 테스트 코드   │            │ 보안 설정      │            │
│  └───────────────┘            └───────────────┘            │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 분석 방법

### 1. 기능적 요구사항 추출

#### API 엔드포인트에서 추출
```bash
# .NET Controller 분석
grep -rn "\[Http" --include="*.cs" | head -50

# Express 라우트 분석
grep -rn "router\.\|app\." --include="*.ts" --include="*.js" | grep -E "get|post|put|delete"
```

#### 서비스 메서드에서 추출
```bash
# 서비스 인터페이스 분석
find . -name "I*Service.cs" -o -name "*Service.interface.ts"
```

### 2. 비기능적 요구사항 추출

| 요구사항 유형 | 분석 대상 | 추출 방법 |
|-------------|----------|----------|
| 성능 | 캐싱 설정, 비동기 처리 | 캐시 어노테이션, async 패턴 검색 |
| 보안 | 인증/인가 설정 | `[Authorize]`, JWT 설정 분석 |
| 확장성 | 로드밸런싱, 분산처리 | Docker, K8s 설정 분석 |
| 가용성 | 헬스체크, 재시도 정책 | Polly, 헬스체크 엔드포인트 |
| 로깅 | 로깅 프레임워크 설정 | Serilog, NLog 설정 |

## 문서 템플릿

```markdown
# 요구사항 명세서

## 1. 문서 정보
| 항목 | 내용 |
|-----|------|
| 프로젝트명 | [프로젝트명] |
| 버전 | [버전] |
| 작성일 | [날짜] |
| 분석 기준 | 코드베이스 역설계 |

## 2. 기능적 요구사항

### 2.1 사용자 관리
| ID | 요구사항 | 우선순위 | 구현 위치 |
|----|---------|---------|----------|
| FR-001 | 사용자 등록 | 필수 | `UserController.Register()` |
| FR-002 | 로그인 | 필수 | `AuthController.Login()` |

### 2.2 [도메인 영역]
...

## 3. 비기능적 요구사항

### 3.1 성능
| ID | 요구사항 | 측정 기준 | 구현 방식 |
|----|---------|----------|----------|
| NFR-001 | 응답시간 | < 200ms | 캐싱, 비동기 처리 |

### 3.2 보안
...

### 3.3 확장성
...

## 4. 제약사항
- [기술적 제약]
- [환경적 제약]

## 5. 추적 매트릭스
| 요구사항 ID | 관련 코드 | 테스트 |
|------------|----------|--------|
| FR-001 | `/src/Controllers/UserController.cs` | `UserControllerTests.cs` |
```

## 요구사항 ID 명명 규칙

| 접두어 | 의미 | 예시 |
|-------|------|------|
| FR | Functional Requirement | FR-001 |
| NFR | Non-Functional Requirement | NFR-001 |
| BR | Business Rule | BR-001 |
| CR | Constraint | CR-001 |

## 우선순위 기준

| 우선순위 | 판단 기준 |
|---------|----------|
| 필수 (Must) | 핵심 기능, 메인 플로우에 포함 |
| 중요 (Should) | 보조 기능, 서브 플로우 |
| 선택 (Could) | 부가 기능, 예외 처리 |
| 미래 (Won't) | 주석/TODO로만 존재 |
